"use strict";const userAgent=navigator.userAgent.toLowerCase(),isMobile=/mobile|iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(userAgent),pref=window.matchMedia("(prefers-reduced-motion: reduce)").matches;let tar=0;var json={title:["Базовый","Продвинутый","Базовый"],imgSrc:["tar1","tar2","tar1"],description:["Готовая платформа на основе ранее созданных без добавления дополнительных функций на программном уровне по желанию заказчика.","Платформа на основе ранее созданных с добавлением или изменением базовых функций на программном уровне по желанию заказчика.","Готовая платформа на основе ранее созданных без добавления дополнительных функций на программном уровне по желанию заказчика."]};async function search(e,t){event.preventDefault();let r=document.querySelectorAll("span#search");r.forEach(e=>{let t=e.textContent,r=document.createTextNode(t);e.replaceWith(r)}),""!=e&&(document.body.innerHTML=document.body.innerHTML.replace(RegExp(e,"gi"),e=>`<span id='search'>${e}</span>`),t=e,ctx=(canvas=document.querySelector(".hyper")).getContext("2d"),setupStars(),updateStars(),window.location="#search",updateSearch())}function updateSearch(){document.querySelector("form").addEventListener("keydown",async function(e){13===e.keyCode&&await search(document.querySelector(".search__input").value.trim().toLowerCase(),lastResFind)})}function changeSpanContent(){document.querySelector("#ap").textContent=window.innerWidth<340?`ООО "АПЕЙРО"`:`Общество с ограниченной ответственностью "АПЕЙРО"`}function createCursor(){if(!isMobile&&!pref){let e=document.createElement("div");e.classList.add("custom-cursor"),document.body.appendChild(e);document.querySelectorAll(".textCur").forEach(t=>{t.addEventListener("mouseenter",()=>{let t=document.elementFromPoint(event.clientX,event.clientY);e.classList.add("text-cursor"),t.classList.contains("white-text")&&e.classList.add("white-text-cursor")}),t.addEventListener("mouseleave",()=>{e.classList.remove("text-cursor"),e.classList.remove("white-text-cursor")})})}}const handleLeave=()=>{document.querySelector(".custom-cursor").remove()},handleEnter=()=>{0===document.querySelectorAll(".custom-cursor").length&&createCursor()};isMobile||(document.body.addEventListener("mouseleave",handleLeave),document.body.addEventListener("mouseenter",handleEnter)),window.addEventListener("resize",changeSpanContent);let lastResFind;function listener(){document.querySelector(".next").addEventListener("click",()=>{tar=tar<2?tar+1:1,animateItem("slideOut")}),document.querySelector(".prev").addEventListener("click",()=>{tar=tar>0?tar-1:1,animateItem("slideIn",!0)})}function download(){var e=document.createElement("a");e.setAttribute("download","Apeiro_pricelist.pdf"),e.href="./static/pricelist.pdf",e.style.opacity="0",e.style.position="absolute",document.body.appendChild(e),e.click(),e.remove()}function animateItem(e,t=!1){let r=document.querySelector("#item");r.style.animation=`${e} 0.5s ${t?"reverse":"forwards"}`,setTimeout(()=>{r.style.opacity="0"},450),setTimeout(()=>{tarUpdate(),r.style.animation=`${t?"slideOut":"slideIn"} 0.5s ${t?"reverse":"forwards"}`,r.style.opacity="1"},500),setTimeout(()=>{r.style.animation="none"},1e3)}function tarUpdate(){document.querySelector("#item").innerHTML=`<h1 class="textCur white-text">${json.title[tar]}</h1><div></div><picture><source srcset="/static/images/${json.imgSrc[tar]}.webp" alt="Тариф" class="itemImg" height="200" width="200" type="image/webp"><source srcset="/static/images/${json.imgSrc[tar]}.png" alt="Тариф" class="itemImg" height="200" width="200" type="image/png"><img src="/static/images/${json.imgSrc[tar]}.png" alt="Тариф" class="itemImg"></picture><div></div><p class="textCur white-text">${json.description[tar]}</p>`}function preloadImages(e){return new Promise((t,r)=>{let a=0;for(let n=0;n<e.length;n++){let s=new Image;s.onload=()=>{++a===e.length&&(t(),console.log("[preloadImages] Ready"))},s.onerror=t=>{console.warn(`[preloadImages] Failed to load image: ${e[n]}`),r(t)},s.src=e[n]}})}async function testWebP(){document.body;let e=new Image,t=!1;await new Promise((r,a)=>{e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",e.onload=function(){t=!0,r()},e.onerror=a});let r=[`/static/images/tar1.${t?"webp":"png"}`,`/static/images/tar2.${t?"webp":"png"}`];console.log(`[webpStatus]: ${t}`),await preloadImages(r)}updateSearch(),changeSpanContent(),document.addEventListener("mousemove",e=>{let t=document.querySelectorAll(".custom-cursor");0!==t.length||pref||isMobile||createCursor();try{isMobile||(t[0].style.left=e.clientX-15+"px",t[0].style.top=e.clientY-5+"px")}catch(r){console.warn("[cursor] Not found")}}),pref||isMobile||createCursor(),listener(),isMobile&&window.removeEventListener("resize",setupStars),document.addEventListener("DOMContentLoaded",testWebP);